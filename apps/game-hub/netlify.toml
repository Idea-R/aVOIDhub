[build]
  # Build outputs to apps/game-hub/dist (Netlify requires publish inside package path)
  publish = "dist"
  # Build only working workspaces (excludes broken tanka-void)
  # Note: game-hub's vite.config outputs to ../../dist, so we copy it after build
  command = "cd ../.. && npm run build --workspace=@avoid/shared --workspace=@avoid/game-hub --workspace=@avoid/void-main --workspace=@avoid/word-avoid --workspace=@avoid/wreck-avoid --workspace=@avoid/wrecka-void && mkdir -p apps/game-hub/dist && cp -r dist/* apps/game-hub/dist/"

[build.environment]
  NODE_VERSION = "18"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Subdirectory redirects for games
[[redirects]]
  from = "/VOIDaVOID/*"
  to = "/VOIDaVOID/index.html"
  status = 200

[[redirects]]
  from = "/TankaVOID/*"
  to = "/TankaVOID/index.html"
  status = 200

[[redirects]]
  from = "/WreckaVOID/*"
  to = "/WreckaVOID/index.html"
  status = 200 